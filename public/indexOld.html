<head>
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/angular_material/0.9.4/angular-material.min.css">
</head>
<body ng-app="PluviamApp" ng-cloak>
	<!-- Angular Material Dependencies -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-animate.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-aria.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angular_material/0.9.4/angular-material.min.js"></script>

	<!-- External libs -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="https://www.google.com/jsapi"></script>
	<div>
		<div layout="column" layout-fill>
			<md-toolbar>
				<div class="md-toolbar-tools">
					<a href="http://pluvi.am" >
						<img src="/images/pluviam_menu_logo.png"/>
					</a>

					<h1 class="md-title">
						pluviam
					</h1>

					<!-- fill up the space between left and right area -->
					<span flex></span>

					<div class="md-subhead">
						<p>
							<a href="http://goo.gl/forms/y4KIgseSPn">
								Contato
							</a>
							<a href="http://pluvi.am/about">
								Sobre
							</a>
						</p>
					</div>

				</div>
			</md-toolbar>

				<div layout="row" layout-align="space-around center">
					<div class="align-center">
						<img src="/images/pluviam_big_logo.png"/>
						<!--<p>Quanto choveu? Qual foi a menor temperatura da madrugada?</br>
							Qual a velocidade máxima do vento da última tempestade?</p>-->
						<p>A pluviam é uma rede de estações meteorológicas automáticas.</br>
						Você mesmo pode montar a sua e visualizar os gráficos aqui!</p>
					</div>
				</div>
				<div layout="row"   layout-align="space-around center">
					<div class="md-title">Olhe os dados das estações existentes:</div>
				</div>


				<div ng-controller="DemoCtrl as ctrl" layout="column" ng-cloak  layout-align="space-around center">
					<md-content class="md-padding" >
				      <form ng-submit="$event.preventDefault()">
				        <md-autocomplete class="align-center" style="width: 400px;"
 							ng-disabled="ctrl.isDisabled"
							md-no-cache="ctrl.noCache"
							md-selected-item="ctrl.selectedItem"
							md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
							md-search-text="ctrl.searchText"
							md-selected-item-change="ctrl.selectedItemChange(item)"
							md-items="item in ctrl.querySearch(ctrl.searchText)"
							md-item-text="item.display"
							md-min-length="0"
				            placeholder="Pesquise aqui as estações!">
				          <md-item-template>
				            <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span>
				          </md-item-template>
				        </md-autocomplete>
				      </form>
				    </md-content>
				</div>

				<div layout="row" layout-align="space-around center">
					<div class="align-center">
						<p class="md-title">Eu quero uma estação meteorológica!</p>
					</div>
				</div>

				<div class="container">
				    <div class="section">

				      <!--   Icon Section   -->
				      <div class="row">

				        <div class="col s12 m4">
				          <div class="icon-block center">
				            <h2 class="center blue-text"><i class="material-icons">backup</i></h2>
				            <h5 class="center text-default">Tempo real</h5>

				            <p class="text-default">Dados online e em tempo real. As estações coletam os dados e enviam automaticamente.
								Os dados ficam disponíveis aqui e no seu site também!</p>
				          </div>
				        </div>

						<div class="col s12 m4">
							<div class="icon-block center">
								<h2 class="center blue-text"><i class="material-icons">lock_open</i></h2>
								<h5 class="center text-default">Open source</h5>

								<p class="text-default">Todo o código fonte das estações é aberto.
									Hardware e firmware estão disponíveis no repositório do GitHub e o envio de dados e uso do site são gratuitos!</p>
							</div>
						</div>

				        <div class="col s12 m4">
				          <div class="icon-block center">
				            <h2 class="center blue-text"><i class="material-icons">settings</i></h2>
				            <h5 class="center text-default">Tenha uma também!</h5>

				            <p class="text-default">Você quer uma estação meteorológica na sua casa? É fácil montar a sua, ou se preferir, você pode comprar uma!</p>
				          </div>
				        </div>
				      </div>

				    </div>
				  </div>



				<div layout="row"   layout-align="space-around center">
					<div layout-align="space-around center">
						Monte a sua
						<p>Não é complicado não! Com noções básicas de eletrônica e programação</br>
							você consegue montar a sua própria estação meteorológica.</br>
							É só seguir os passos da documentação.</br>
							Todo software e hardware são open-source.
						</p>
					</div>
					<div layout-align="space-around center">
						Compre a sua
						<p>Entre em <a href="http://goo.gl/forms/y4KIgseSPn" >contato</a> </br>
							para receber um  orçamento.</p>
					</div>
				</div>

				<div layout="row" layout-align="space-around center">
					<div class="align-center">
						<p class="md-title">Sou professor ou estudante</p>
					</div>
				</div>
				<div layout="row" layout-align="space-around center">
					<div class="align-center">
						Que tal um incentivo pra montar uma estação na sua escola ou universidade?</br>
						<a href="http://goo.gl/forms/y4KIgseSPn" >Quero uma Estação Meteorológica na minha escola também!</a>
					</div>
				</div>

				<div layout="row" layout-align="space-around center">
					<div class="align-center">
						<p class="md-title">Posso mostrar os gráficos ou dados no meu site?</p>
					</div>
				</div>
				<div layout="row" layout-align="space-around center">
					<div class="align-center">
						Sim, pode! Porém precisamos configurar para que tudo funcione.</br>
						<a href="http://goo.gl/forms/y4KIgseSPn" >Para isso, algumas informações são necessárias.</a>
					</div>
				</div>

			</md-content>
			<md-toolbar>
				<div layout="row">
					<div flex layout-margin></div>
					<div flex layout-margin>
						<p class="md-caption">Pluviam | Saulo Matte Madalozzo ME | hello@pluvi.am |
							<a href="http://goo.gl/forms/y4KIgseSPn" >
								Contato
							</a>
						</p>
					</div>
				</div>
			</md-toolbar>
		</div>
	</div>
	<script>
	//angular

	(function () {
	  'use strict';
	  angular
	      .module('PluviamApp', ['ngMaterial'])
		  .config(function($mdThemingProvider) {
			  $mdThemingProvider.theme('default')
				  .primaryPalette('blue')
				  .accentPalette('indigo');
			  }
		  )
	      .controller('DemoCtrl', DemoCtrl);


	  function DemoCtrl ($timeout, $q, $log, $http) {
	    var self = this;
	    // list of `state` value/display objects
	    self.stations        = loadAll();
	    self.querySearch   = querySearch;
		self.selectedItemChange = selectedItemChange;
	    self.searchTextChange   = searchTextChange;

	    self.newState = newState;

	    function newState(state) {
	      alert("Sorry! You'll need to create a Constituion for " + state + " first!");
	    }

	    function querySearch (query) {
	      var results = query ? self.stations.filter( createFilterFor(query) ) : self.stations,
	          deferred;
	        return results;
	    }
	    function searchTextChange(text) {
	      $log.info('Text changed to ' + text);
	    }
	    function selectedItemChange(item) {
	      $log.info('Item changed to ' + JSON.stringify(item));
	    }
	    /**
	     * Build `states` list of key/value pairs
	     */
	    function loadAll() {
			var stations = [];
			$http.get('http://localhost:1337/r/stations/').
				success(function(results, status, headers, config) {
					console.log(results);
					$.each(results.stations, function (i, row) {
						var station = {};
						station.display = row.location.country + " > " +
							row.location.divisionCode + " > " + row.location.city + " > " + row.fullName;
						station.value = station.id;
						stations.push(station);
					});
				});
			return stations;
	    }
	    /**
	     * Create filter function for a query string
	     */
	    function createFilterFor(query) {
	      var lowercaseQuery = angular.lowercase(query);
	      return function filterFn(stations) {
	        return (stations.value.indexOf(lowercaseQuery) === 0);
	      };
	    }
	  }
	})();

	</script>
	<style>
		.align-center{text-align:center}
		.background-image{
			background-image: url("/images/background2.jpg");
			position: fixed;
			bottom: 0px;
			right: 0px;
			z-index: 1;
			padding: 0px;
			margin: 0px;
		}
		.transparent{
			background-color: transparent !important;
		}
	</style>
</body>
