"use strict";function DemoCtrl(t,e,o){function n(o){var n,a=o?s.repos.filter(l(o)):s.repos;return s.simulateQuery?(n=e.defer(),t(function(){n.resolve(a)},1e3*Math.random(),!1),n.promise):a}function a(t){o.info("Text changed to "+t)}function r(t){o.info("Item changed to "+JSON.stringify(t))}function i(){var t=[{name:"Angular 1",url:"https://github.com/angular/angular.js",watchers:"3,623",forks:"16,175"},{name:"Angular 2",url:"https://github.com/angular/angular",watchers:"469",forks:"760"},{name:"Angular Material",url:"https://github.com/angular/material",watchers:"727",forks:"1,241"},{name:"Bower Material",url:"https://github.com/angular/bower-material",watchers:"42",forks:"84"},{name:"Material Start",url:"https://github.com/angular/material-start",watchers:"81",forks:"303"}];return t.map(function(t){return t.value=t.name.toLowerCase(),t})}function l(t){var e=angular.lowercase(t);return function(t){return 0===t.value.indexOf(e)}}var s=this;s.simulateQuery=!1,s.isDisabled=!1,s.repos=i(),s.querySearch=n,s.selectedItemChange=r,s.searchTextChange=a}function drawChart(t,e,o,n,a){var r={hAxis:{format:"HH:mm"},colors:e,legend:{position:"none"},height:a,backgroundColor:"#FAFAFA",title:o,isStacked:!1};t.draw(n,r)}function PhotosController(t,e,o){t.station=e.station,t.hide=function(){o.hide()},t.cancel=function(){o.cancel()},t.answer=function(t){o.hide(t)}}function InfoController(t,e,o){t.station=e.station,t.hide=function(){o.hide()},t.cancel=function(){o.cancel()},t.answer=function(t){o.hide(t)}}DemoCtrl.$inject=["$timeout","$q","$log"],PhotosController.$inject=["$scope","$rootScope","$mdDialog"],InfoController.$inject=["$scope","$rootScope","$mdDialog"],function(){angular.module("angulike",[]).directive("fbLike",["$window","$rootScope",function(t,e){return{restrict:"A",scope:{fbLike:"=?"},link:function(e,o,n){function a(){if(!n.fbLike||e.fbLike||r)o.html('<div class="fb-like"'+(e.fbLike?' data-href="'+e.fbLike+'"':"")+' data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>'),t.FB.XFBML.parse(o.parent()[0]);else{r=!0;var i=e.$watch("fbLike",function(t,e){t&&(a(),i())})}}t.FB?a():$.getScript("//connect.facebook.net/en_US/sdk.js",function(){t.FB.init({appId:742272115829511,xfbml:!0,version:"v2.0"}),a()});var r=!1}}}]).directive("googlePlus",["$window",function(t){return{restrict:"A",scope:{googlePlus:"=?"},link:function(e,o,n){function a(){if(!n.googlePlus||e.googlePlus||r)o.html('<div class="g-plusone"'+(e.googlePlus?' data-href="'+e.googlePlus+'"':"")+' data-size="medium"></div>'),t.gapi.plusone.go(o.parent()[0]);else{r=!0;var i=e.$watch("googlePlus",function(t,e){t&&(a(),i())})}}t.gapi?a():$.getScript("//apis.google.com/js/platform.js",function(){a()});var r=!1}}}]).directive("tweet",["$window","$location",function(t,e){return{restrict:"A",scope:{tweet:"=",tweetUrl:"="},link:function(o,n,a){function r(){if(o.tweet||i)n.html('<a href="https://twitter.com/share" class="twitter-share-button" data-text="'+o.tweet+'" data-url="'+(o.tweetUrl||e.absUrl())+'">Tweet</a>'),t.twttr.widgets.load(n.parent()[0]);else{i=!0;var a=o.$watch("tweet",function(t,e){t&&(r(),a())})}}t.twttr?r():$.getScript("//platform.twitter.com/widgets.js",function(){r()});var i=!1}}}]).directive("pinIt",["$window","$location",function(t,e){return{restrict:"A",scope:{pinIt:"=",pinItImage:"=",pinItUrl:"="},link:function(o,n,a){function r(){if(o.pinIt||i)n.html('<a href="//www.pinterest.com/pin/create/button/?url='+(o.pinItUrl||e.absUrl())+"&media="+o.pinItImage+"&description="+o.pinIt+'" data-pin-do="buttonPin" data-pin-config="beside"></a>'),t.parsePins(n.parent()[0]);else{i=!0;var a=o.$watch("pinIt",function(t,e){t&&(r(),a())})}}t.parsePins?r():!function(e){var o=e.getElementsByTagName("SCRIPT")[0],n=e.createElement("SCRIPT");n.type="text/javascript",n.async=!0,n.src="//assets.pinterest.com/js/pinit.js",n["data-pin-build"]="parsePins",n.onload=function(){t.parsePins?r():setTimeout(n.onload,100)},o.parentNode.insertBefore(n,o)}(t.document);var i=!1}}}])}();var pluviamApp=angular.module("pluviamApp",["ngRoute","ngMaterial","angulike"]);pluviamApp.config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("blue").accentPalette("indigo")}]),pluviamApp.config(["$compileProvider",function(t){t.debugInfoEnabled(!1)}]),pluviamApp.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"home.html",controller:"mainController"}).when("/about",{templateUrl:"about.html",controller:"aboutController"}).when("/:country/:county/:city/:stationName",{templateUrl:"stations.html",controller:"StationsController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}]),pluviamApp.controller("mainController",DemoCtrl),pluviamApp.controller("aboutController",["$scope",function(t){t.message="Nada aqui, ainda"}]),pluviamApp.controller("StationsController",["$scope","$rootScope","$http","$routeParams","$mdDialog","$mdMedia","$interval",function(t,e,o,n,a,r,i){function l(){console.log("api called"),o.get(s+"/stations/").success(function(n,a,i,l){angular.forEach(n.stations,function(n,a){u===n.location.countryCode.toLowerCase()&&m===n.location.countyCode.toLowerCase()&&d===n.location.urlCity.toLowerCase()&&f===n.urlName.toLowerCase()&&(c=n.id,o.get(s+"/stations/"+c).success(function(o,n,a,i){t.weather=o.weather[o.weather.length-1],t.station=o.station,e.station=o.station,e.seo={pageTitle:"pluviam - "+o.station.fullName,canonicalUrl:"http://pluvi.am/"+o.station.location.countryCode.toLowerCase()+"/"+o.station.location.countyCode.toLowerCase()+"/"+o.station.location.urlCity+"/"+o.station.urlName,name:o.station.fullName+" - Estação meteorológica Pluviam"};var l=document.getElementById("indeterminateLoader"),s=document.getElementById("graphsBase");angular.forEach(o.station.inputs,function(e,n){if("none"!==e.chartType){var a=e.name,i=!1,l="";""!==e.plotTogether&&(i=e.plotTogether,angular.forEach(o.station.inputs,function(t,e){t.name===i&&(l=t)})),s.insertAdjacentHTML("beforebegin",'<div flex id="'+a+'"></div>');var c=new google.visualization.DataTable;if(c.addColumn("datetime","Data/Hora"),c.addColumn("number",e.shortName),i&&c.addColumn("number",l.shortName),i)angular.forEach(o.weather,function(t,e){c.addRow([new Date(t.date),parseFloat(t[a]),t[l.name]])});else if(e.cumulative){var u,m,d=0,f=o.weather[o.weather.length-1].date,h=new Date(f).getDate();angular.forEach(o.weather,function(t,e){m=new Date(t.date).getDate(),u=t[a],c.addRow([new Date(t.date),u]),m===h&&(d+=u)}),t.weather[a]=parseFloat(d.toFixed(1))}else angular.forEach(o.weather,function(t,e){c.addRow([new Date(t.date),t[a]])});var p=r("sm")||r("xs")?250:400;"LineChart"===e.chartType?drawChart(new google.visualization.LineChart(document.getElementById(a)),e.chartColors,e.shortName+" - "+e.unit,c,p):"ColumnChart"===e.chartType?drawChart(new google.visualization.ColumnChart(document.getElementById(a)),e.chartColors,e.shortName+" - "+e.unit,c,p):"AreaChart"===e.chartType&&drawChart(new google.visualization.AreaChart(document.getElementById(a)),e.chartColors,e.shortName+" - "+e.unit,c,p)}}),l.style.display="none"}).error(function(t,e,o,n){console.log("fail")}))})}).error(function(t,e,o,n){console.log("fail")})}var s="//api.pluvi.am",c="",u=n.country.toLowerCase(),m=n.county.toLowerCase(),d=n.city.toLowerCase(),f=n.stationName.toLowerCase();l(),i(l,3e5),t.showPhotos=function(e){var o=(r("sm")||r("xs"))&&t.customFullscreen;a.show({controller:PhotosController,templateUrl:"photos.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:o}).then(function(e){t.status='You said the information was "'+e+'".'},function(){t.status="You cancelled the dialog."}),t.$watch(function(){return r("xs")||r("sm")},function(e){t.customFullscreen=!0})},t.showInfos=function(e){var o=(r("sm")||r("xs"))&&t.customFullscreen;a.show({controller:InfoController,templateUrl:"infos.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:o}).then(function(e){t.status='You said the information was "'+e+'".'},function(){t.status="You cancelled the dialog."}),t.$watch(function(){return r("xs")||r("sm")},function(e){t.customFullscreen=!0})}}]);